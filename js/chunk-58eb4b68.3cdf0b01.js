(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-58eb4b68"],{"1f0b":function(t,a,s){"use strict";var e=s("3129"),i={name:"BookListMobileSkeleton"},o=(s("f412"),s("2877")),c=Object(o.a)(i,(function(){var t=this._self._c;return t("div",[t("ul",[t("li",[t("section",{staticClass:"skeleton-book-list"},[t("div",{staticClass:"img"},[t(e.a,{attrs:{type:"list-item-avatar-two-line"}}),t(e.a,{attrs:{type:"text"}}),t(e.a,{attrs:{type:"text"}}),t(e.a,{attrs:{type:"text"}}),t(e.a,{attrs:{type:"text"}}),t(e.a,{attrs:{type:"text"}})],1)])]),t("li",[t("section",{staticClass:"skeleton-book-list"},[t("div",{staticClass:"img"},[t(e.a,{attrs:{type:"list-item-avatar-two-line"}}),t(e.a,{attrs:{type:"text"}}),t(e.a,{attrs:{type:"text"}}),t(e.a,{attrs:{type:"text"}}),t(e.a,{attrs:{type:"text"}}),t(e.a,{attrs:{type:"text"}})],1)])]),t("li",[t("section",{staticClass:"skeleton-book-list"},[t("div",{staticClass:"img"},[t(e.a,{attrs:{type:"list-item-avatar-two-line"}}),t(e.a,{attrs:{type:"text"}}),t(e.a,{attrs:{type:"text"}}),t(e.a,{attrs:{type:"text"}}),t(e.a,{attrs:{type:"text"}}),t(e.a,{attrs:{type:"text"}})],1)])]),t("li",[t("section",{staticClass:"skeleton-book-list"},[t("div",{staticClass:"img"},[t(e.a,{attrs:{type:"list-item-avatar-two-line"}}),t(e.a,{attrs:{type:"text"}}),t(e.a,{attrs:{type:"text"}}),t(e.a,{attrs:{type:"text"}}),t(e.a,{attrs:{type:"text"}}),t(e.a,{attrs:{type:"text"}})],1)])]),t("li",[t("section",{staticClass:"skeleton-book-list"},[t("div",{staticClass:"img"},[t(e.a,{attrs:{type:"list-item-avatar-two-line"}}),t(e.a,{attrs:{type:"text"}}),t(e.a,{attrs:{type:"text"}}),t(e.a,{attrs:{type:"text"}}),t(e.a,{attrs:{type:"text"}}),t(e.a,{attrs:{type:"text"}})],1)])])])])}),[],!1,null,"975c769e",null);a.a=c.exports},"216a":function(t,a,s){"use strict";s("534d")},2698:function(t,a,s){},"277f":function(t,a,s){"use strict";s.r(a);s("14d9");var e=s("2f62"),i=s("e31c"),o=s("e71f"),c=s("f3e4"),n={name:"BookList",props:["books","infoChange","shopRate","basicRate","bookRate"],data:()=>({cart:[]}),computed:{...Object(e.b)("common",["cartList"])},async created(){try{const t=Object(c.b)("userInfo");this.uid=t.uid;const a=Object(o.j)(Object(o.b)(i.b,"cart-"+this.uid));(await Object(o.f)(a)).forEach(t=>{this.cart.push(t.data())})}catch(t){console.error("Error adding document: ",t)}},methods:{async addCart(t){try{this.cart.some(a=>a.isbn===t.isbn)?alert("이미 담아 두었습니다.\n ‘장바구니’에서 수량을 조절해 주세요"):(this.$store.commit("common/setLoading",!0),t.count=1,await Object(o.a)(Object(o.b)(i.b,"cart-"+this.uid),t),this.cart.push(t),alert("장바구니에 담았습니다."),this.$store.commit("common/changeCartList",this.cartList+1))}catch(t){console.error("Error adding document: ",t)}this.$store.commit("common/setLoading",!1)}}},r=(s("216a"),s("2877")),l=Object(r.a)(n,(function(){var t=this,a=t._self._c;return a("div",[a("section",{staticClass:"book-list"},[t.books.length>0?a("ul",t._l(t.books,(function(s){return a("li",{key:s.data.isbn},[a("section",{staticClass:"contents d-flex align-center justify-space-between"},[a("article",{staticClass:"basic-info d-flex align-center"},[a("section",{staticClass:"thumbnail"},[a("img",{attrs:{src:`https://bookthumb-phinf.pstatic.net/cover/${s.data.image}?type=m1`,alt:s.data.subject}})]),a("div",{staticClass:"book-info"},[a("h3",[t._v(t._s(s.data.subject))]),a("div",[a("span",{staticClass:"mr18"},[t._v(t._s(s.data.author))]),a("span",[t._v(t._s(s.data.publisher)+" ("+t._s(s.data.publication_date)+")")])])])]),a("article",{staticClass:"isbn"},[t._v("ISBN : "+t._s(s.data.isbn))]),a("article",{staticClass:"price-info"},[a("div",{staticClass:"mr14"},[t._v("정가 "+t._s(s.data.price&&s.data.price.toLocaleString())+"원")]),t.bookRate.some(t=>t.data.isbn===s.data.isbn&&""!==t.data.rate)?a("div",t._l(t.bookRate,(function(e,i){return a("div",{key:i,staticClass:"mr10"},[e.data.isbn===s.data.isbn?a("span",[t._v("공급률 "+t._s(e.data.rate)+"%")]):t._e()])})),0):t._e(),t.shopRate.some(t=>t.sid===s.data.sid&&""!==t.rate)&&t.bookRate.some(t=>t.data.isbn===s.data.isbn&&""===t.data.rate)||0===t.bookRate.filter(t=>t.data.isbn===s.data.isbn).length&&t.bookRate.some(t=>t.data.isbn===s.data.isbn&&""===t.data.rate)?a("div",t._l(t.shopRate,(function(e,i){return a("div",{key:i,staticClass:"mr10"},[e.sid===s.data.sid&&""!==e.rate?a("span",[t._v(" 공급률 "+t._s(e.rate)+"% ")]):t._e()])})),0):t._e(),t.shopRate.some(t=>t.sid===s.data.sid&&""===t.rate)&&t.bookRate.some(t=>t.data.isbn===s.data.isbn&&""===t.data.rate)||0===t.shopRate.filter(t=>t.sid===s.data.sid).length||0===t.bookRate.filter(t=>t.data.isbn===s.data.isbn).length?a("div",t._l(t.basicRate,(function(e,i){return a("div",{key:i,staticClass:"mr10"},[s.data.sid===e.sid?a("span",[t._v("공급률 "+t._s(e.supplyRate)+"%")]):t._e()])})),0):t._e()]),t.bookRate.some(t=>t.data.isbn===s.data.isbn&&""!==t.data.rate)?a("div",{staticClass:"price"},t._l(t.bookRate,(function(e,i){return a("div",{key:i},[e.data.isbn===s.data.isbn?a("span",[t._v(" 공급가 "+t._s(s.data.price&&(s.data.price*e.data.rate/100).toLocaleString())+"원 ")]):t._e()])})),0):t._e(),t.shopRate.some(t=>t.sid===s.data.sid&&""!==t.rate)&&t.bookRate.some(t=>t.data.isbn===s.data.isbn&&""===t.data.rate)||0===t.bookRate.filter(t=>t.data.isbn===s.data.isbn).length&&t.bookRate.some(t=>t.data.isbn===s.data.isbn&&""===t.data.rate)?a("div",{staticClass:"price"},t._l(t.shopRate,(function(e,i){return a("div",{key:i},[e.sid===s.data.sid&&""!==e.rate?a("span",[t._v(" 공급가 "+t._s(s.data.price&&(s.data.price*e.rate/100).toLocaleString())+"원 ")]):t._e()])})),0):t._e(),t.shopRate.some(t=>t.sid===s.data.sid&&""===t.rate)&&t.bookRate.some(t=>t.data.isbn===s.data.isbn&&""===t.data.rate)||0===t.shopRate.filter(t=>t.sid===s.data.sid).length||0===t.bookRate.filter(t=>t.data.isbn===s.data.isbn).length?a("div",{staticClass:"price"},t._l(t.basicRate,(function(e,i){return a("div",{key:i,staticClass:"mr10"},[s.data.sid===e.sid?a("span",[t._v("공급가 "+t._s(s.data.price&&(s.data.price*e.supplyRate/100).toLocaleString())+"원")]):t._e()])})),0):t._e(),a("article",{staticClass:"add-cart"},[a("button",{staticClass:"basic",on:{click:function(a){return t.addCart(s.data)}}},[t._v("담기")])])])])})),0):a("div",{staticClass:"book-search-alert"},[t.infoChange?a("span",[t._v("검색 결과가 없습니다.")]):t._e()])]),t.books.length>=10?a("div",{staticClass:"btn-more",on:{click:function(a){return t.$emit("more")}}},[a("button",{staticClass:"basic"},[t._v("더 보기")])]):t._e()])}),[],!1,null,"09f25936",null).exports,d={components:{Selects:s("a05a").a},props:["itemList"],data:()=>({select:"",keyword:""}),computed:{...Object(e.b)("common",["skeletonLoading"])},methods:{change(t){this.select=t},search(){""!==this.keyword?this.$emit("search",{select:this.select,keyword:this.keyword}):alert("검색어를 입력해주세요.")}}},b=(s("5b1e"),Object(r.a)(d,(function(){var t=this,a=t._self._c;return a("section",{staticClass:"search-group"},[a("Selects",{attrs:{itemList:t.itemList},on:{change:t.change}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"basic",attrs:{type:"text"},domProps:{value:t.keyword},on:{keypress:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.search.apply(null,arguments)},input:function(a){a.target.composing||(t.keyword=a.target.value)}}}),a("button",{staticClass:"basic",attrs:{disabled:t.skeletonLoading},on:{click:t.search}},[t._v("검색")])],1)}),[],!1,null,"3df1bcea",null).exports),h=s("bc3a");var u={name:"KakaoBookSearch",props:["keyword","search","clear"],data:()=>({list:[]}),watch:{search(){this.searchBooks()},clear(){this.list=[]}},methods:{async searchBooks(){this.$store.commit("common/setLoading",!0);const t=await(a={query:this.keyword},h.a.get("https://dapi.kakao.com/v3/search/book",{headers:{Authorization:"KakaoAK 2747cc77d6c23300d9fb150e23b1b9df"},params:a}).then(t=>t).catch(t=>console.log(t)));var a;this.$store.commit("common/setLoading",!1),200===t.status?(this.list=[],this.list=t.data.documents,this.list.forEach(t=>{const a=t.isbn.split(" ");t.isbn=a[1]}),0===t.data.documents.length&&this.$emit("result",!1)):this.$emit("result",!1)},isbn(t){this.$emit("result",t)}}},p=(s("7f24"),Object(r.a)(u,(function(){var t=this,a=t._self._c;return a("div",[t.list.length>0?a("ul",t._l(t.list,(function(s){return a("li",{key:s.isbn,on:{click:function(a){return t.isbn(s.isbn)}}},[t._v(t._s(s.title)+" : "+t._s(s.isbn))])})),0):t._e()])}),[],!1,null,"45624eeb",null).exports),m=s("691b"),k={components:{BookListMobileSkeleton:s("1f0b").a,BookListSkeleton:m.a,SearchBasicGroup:b,BookList:l,KakaoBookSearch:p},data:()=>({itemList:[{item:"ISBN",value:"isbn"},{item:"책 제목",value:"subject"},{item:"저자",value:"author"},{item:"출판사",value:"publisher"}],select:"isbn",keyword:"",limit:10,books:[],lastVisible:"",infoChange:!1,kakaoSearch:!1,clear:!1,uid:"",shopRate:[],basicRate:[],bookRate:[]}),computed:{...Object(e.b)("common",["loading","skeletonLoading","mobile"])},async created(){const t=Object(c.b)("userInfo");this.uid=t.uid;try{const t=Object(o.d)(i.b,"shopInfo",this.uid),a=await Object(o.e)(t);this.shopRate=a.data().shopRate,this.bookRate=a.data().bookRate}catch(t){console.log(t)}try{const t=Object(o.j)(Object(o.b)(i.b,"publisherInfo"));(await Object(o.f)(t)).forEach(t=>{this.basicRate.push({sid:t.data().sid,supplyRate:t.data().supplyRate})})}catch(t){console.error("Error adding document: ",t)}},methods:{async firstBookList(){try{this.$store.commit("common/setSkeleton",!0);const t=Object(o.j)(Object(o.b)(i.b,"booksData"),Object(o.o)(this.select,"==",this.keyword),Object(o.h)(this.limit)),a=await Object(o.f)(t);this.lastVisible=a.docs[a.docs.length-1],a.forEach(t=>{this.books.push({id:t.id,data:t.data()})}),this.infoChange=!0}catch(t){console.error("Error adding document: ",t)}this.$store.commit("common/setSkeleton",!1)},async more(){try{this.$store.commit("common/setLoading",!0);const t=Object(o.j)(Object(o.b)(i.b,"booksData"),Object(o.o)(this.select,"==",this.keyword),Object(o.m)(this.lastVisible),Object(o.h)(this.limit)),a=await Object(o.f)(t);0===a.docs.length&&alert("도서정보가 더이상 없습니다."),this.lastVisible=a.docs[a.docs.length-1],a.forEach(t=>{this.books.push({id:t.id,data:t.data()})})}catch(t){console.error("Error adding document: ",t)}this.$store.commit("common/setLoading",!1)},search(t){this.books=[],"subject"!==t.select?(this.clear=!this.clear,""!==t.select&&(this.select=t.select),""!==t.keyword&&(this.keyword=t.keyword),this.firstBookList()):(this.infoChange=!1,this.keyword=t.keyword,this.kakaoSearch=!this.kakaoSearch)},isbnSearch(t){!1!==t?(this.books=[],this.select="isbn",this.keyword=t,this.firstBookList()):this.infoChange=!0}}},y=Object(r.a)(k,(function(){var t=this,a=t._self._c;return a("section",[a("h2",{staticClass:"sub-title"},[t._v("책 검색")]),a("section",{staticClass:"sub-container"},[a("SearchBasicGroup",{attrs:{itemList:t.itemList},on:{search:t.search}}),a("KakaoBookSearch",{attrs:{keyword:t.keyword,search:t.kakaoSearch,clear:t.clear},on:{result:t.isbnSearch}}),t.skeletonLoading&&!t.mobile?a("BookListSkeleton",{staticClass:"mt14"}):t._e(),t.skeletonLoading&&t.mobile?a("BookListMobileSkeleton",{staticClass:"mt14"}):a("BookList",{attrs:{books:t.books,infoChange:t.infoChange,shopRate:t.shopRate,basicRate:t.basicRate,bookRate:t.bookRate},on:{more:t.more}})],1)])}),[],!1,null,null,null);a.default=y.exports},"43d3":function(t,a,s){},5281:function(t,a,s){},"534d":function(t,a,s){},"5b1e":function(t,a,s){"use strict";s("43d3")},"691b":function(t,a,s){"use strict";var e=s("3129"),i={name:"BookListSkeleton"},o=(s("b57b"),s("2877")),c=Object(o.a)(i,(function(){var t=this._self._c;return t("div",[t("ul",[t("li",[t("section",{staticClass:"d-flex align-center justify-space-between skeleton-book-list"},[t("div",{staticClass:"img"},[t(e.a,{attrs:{type:"list-item-avatar-two-line"}})],1),t("div",{staticClass:"text"},[t(e.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(e.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(e.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(e.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(e.a,{attrs:{type:"text"}})],1)])]),t("li",[t("section",{staticClass:"d-flex align-center justify-space-between skeleton-book-list"},[t("div",{staticClass:"img"},[t(e.a,{attrs:{type:"list-item-avatar-two-line"}})],1),t("div",{staticClass:"text"},[t(e.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(e.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(e.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(e.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(e.a,{attrs:{type:"text"}})],1)])]),t("li",[t("section",{staticClass:"d-flex align-center justify-space-between skeleton-book-list"},[t("div",{staticClass:"img"},[t(e.a,{attrs:{type:"list-item-avatar-two-line"}})],1),t("div",{staticClass:"text"},[t(e.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(e.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(e.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(e.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(e.a,{attrs:{type:"text"}})],1)])]),t("li",[t("section",{staticClass:"d-flex align-center justify-space-between skeleton-book-list"},[t("div",{staticClass:"img"},[t(e.a,{attrs:{type:"list-item-avatar-two-line"}})],1),t("div",{staticClass:"text"},[t(e.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(e.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(e.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(e.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(e.a,{attrs:{type:"text"}})],1)])]),t("li",[t("section",{staticClass:"d-flex align-center justify-space-between skeleton-book-list"},[t("div",{staticClass:"img"},[t(e.a,{attrs:{type:"list-item-avatar-two-line"}})],1),t("div",{staticClass:"text"},[t(e.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(e.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(e.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(e.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(e.a,{attrs:{type:"text"}})],1)])])])])}),[],!1,null,"d8eeb990",null);a.a=c.exports},"7f24":function(t,a,s){"use strict";s("5281")},a05a:function(t,a,s){"use strict";var e=s("b974"),i={props:["itemList"],data:()=>({select:""}),mounted(){this.select=this.itemList[0].value}},o=(s("df9f"),s("2877")),c=Object(o.a)(i,(function(){var t=this,a=t._self._c;return a("div",{staticClass:"selects"},[a(e.a,{attrs:{dense:"",items:t.itemList,"item-text":"item","item-value":"value",outlined:""},on:{input:function(a){return t.$emit("change",t.select)}},model:{value:t.select,callback:function(a){t.select=a},expression:"select"}})],1)}),[],!1,null,"7b5afd12",null);a.a=c.exports},b57b:function(t,a,s){"use strict";s("da01")},c2fe:function(t,a,s){},da01:function(t,a,s){},df9f:function(t,a,s){"use strict";s("2698")},f412:function(t,a,s){"use strict";s("c2fe")}}]);