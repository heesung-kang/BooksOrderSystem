(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5ebb4d52"],{"0264":function(t,a,s){"use strict";s("9d0d")},"08da":function(t,a,s){},"3bb9":function(t,a,s){"use strict";s("08da")},"9d0d":function(t,a,s){},c228:function(t,a,s){"use strict";s.r(a);var e=s("7679"),i=s("132d"),o=(s("14d9"),s("2f62")),c=s("e71f"),n=s("e31c"),r=s("f3e4"),d=s("68e0"),l=s("691b"),u=s("1f0b"),m={components:{modalWrap:s("7402").a},props:["id","cart","uid"],data:()=>({sendData:[]}),async created(){const{name:t}=Object(r.b)("userInfo"),a=Object(c.j)();this.cart.forEach(s=>{s.data.count=parseInt(s.data.count),s.data.uid=this.uid,s.data.order_time_id=this.$date().format("YYYYMMDDHHmmss"),s.data.order_time=a,s.data.reply_time="-",s.data.reply_time_id="-",s.data.order_real_time="-",s.data.order_real_time_id="-",s.data.release_time="-",s.data.release_time_id="-",s.data.memo="-",s.data.shop_order_status=0,s.data.publisher_reply_status=0,s.data.order_check=!1,s.data.reply_count=0,s.data.shop_name=t,s.data.reply_count=s.data.count,s.data.totalCount=0,s.data.totalPrice=0,this.sendData.push(s.data)});const s=Object(c.n)(n.b);await this.sendData.forEach(t=>{const a=Object(c.d)(Object(c.b)(n.b,"orderRequest"));s.set(a,t)}),await s.commit()},methods:{async close(){const t=Object(c.n)(n.b),{uid:a}=Object(r.b)("userInfo");await this.id.forEach(s=>{t.delete(Object(c.d)(n.b,"cart-"+a,s))}),await t.commit(),this.$store.commit("common/setLoading",!1),this.$emit("close"),this.$router.push("/")}}},b=(s("3bb9"),s("2877")),_=Object(b.a)(m,(function(){var t=this._self._c;return t("modalWrap",{on:{close:this.close}},[t("template",{slot:"head"},[t("h2",[this._v("주문서")])]),t("template",{slot:"body"},[t("div",[this._v("\n      주문서가 출판사에 전송되었습니다."),t("br"),this._v('\n      "주문 내역"에서 회신 확인 후 결제 해 주세요\n    ')]),t("div",{staticClass:"mt20 btn-wrap"},[t("button",{staticClass:"basic",on:{click:this.close}},[this._v("확인")])])])],2)}),[],!1,null,"9b9f640e",null).exports,h={components:{BookListSkeleton:l.a,BookListMobileSkeleton:u.a},data:()=>({cart:[],ids:[]}),computed:{...Object(o.b)("common",["windowWidth","mobile","skeletonLoading"]),bookCount(){let t=0;return this.cart.forEach(a=>t+=Number(a.data.count)),t},totalPrice(){let t=0;return this.cart.forEach(a=>{t+=a.data.price*a.data.supply_rate*a.data.count/100}),t}},created(){this.load()},methods:{showModal(){const{uid:t}=Object(r.b)("userInfo");this.mobile?this.$modal.show(_,{id:this.ids,cart:this.cart,uid:t},Object(d.a)("ModalCart","95%","auto",!1)):this.$modal.show(_,{id:this.ids,cart:this.cart,uid:t},Object(d.a)("ModalCart","500px","auto",!1))},async load(){this.cart=[],this.ids=[];try{const{uid:t}=Object(r.b)("userInfo");this.$store.commit("common/setSkeleton",!0);const a=Object(c.i)(Object(c.b)(n.b,"cart-"+t));(await Object(c.e)(a)).forEach(t=>{this.cart.push({id:t.id,data:t.data()}),this.ids.push(t.id)})}catch(t){console.error("Error adding document: ",t)}this.$store.commit("common/setSkeleton",!1)},async update(t,a){try{const{uid:s}=Object(r.b)("userInfo");this.$store.commit("common/setLoading",!0),await Object(c.l)(Object(c.d)(n.b,"cart-"+s,t),{count:parseInt(a)}),alert("수량이 변경 되었습니다")}catch(t){console.error("Error adding document: ",t)}this.$store.commit("common/setLoading",!1)},async del(t){try{const{uid:a}=Object(r.b)("userInfo");this.$store.commit("common/setLoading",!0),await Object(c.c)(Object(c.d)(n.b,"cart-"+a,t)),alert("삭제 되었습니다"),await this.load()}catch(t){console.error("Error adding document: ",t)}this.$store.commit("common/setLoading",!1)}}},v=(s("0264"),{components:{CartList:Object(b.a)(h,(function(){var t=this,a=t._self._c;return a("section",[t.skeletonLoading&&!t.mobile?a("BookListSkeleton",{staticClass:"mt14"}):t._e(),t.skeletonLoading&&t.mobile?a("BookListMobileSkeleton",{staticClass:"mt14"}):t._e(),t.cart.length>0?a("div",[t.skeletonLoading?t._e():a("section",[t.mobile?t._e():a("article",{staticClass:"cart-header"},[a("div",[t._v("품목정보")]),a("div",[t._v("출판사")]),a("div",[t._v("ISBN")]),t._m(0),a("div",[t._v("공급가")]),a("div",[t._v("수량")]),a("div")]),a("article",{staticClass:"cart-list"},[a("ul",t._l(t.cart,(function(s,o){var c;return a("li",{key:s.isbn},[a("article",{staticClass:"d-flex align-center"},[a("div",{staticClass:"d-flex align-center thumbnail-wrap"},[a("div",{staticClass:"basic-info"},[a("div",{staticClass:"book-name"},[t._v(t._s(s.data.subject))]),a("div",{staticClass:"only-mobile"},[a("div",{staticClass:"author"},[t._v(t._s(s.data.author))]),t.mobile?a("div",{staticClass:"company"},[t._v(t._s(s.data.publisher))]):t._e()])])]),t.mobile?t._e():a("div",[t._v(t._s(s.data.publisher))]),a("div",{staticClass:"isbn"},[t._v(t._s(s.data.isbn))]),a("div",{staticClass:"price-etc"},[a("div",{staticClass:"normal-price"},[t.mobile?a("span",[t._v("정가")]):t._e(),t._v(" "+t._s(null===(c=s.data.price)||void 0===c?void 0:c.toLocaleString())+"원")]),a("div",{staticClass:"rate"},[t.mobile?a("span",[t._v("공급률")]):t._e(),t._v(" "+t._s(s.data.supply_rate)+"%")])]),a("div",{staticClass:"price"},[t.mobile?a("span",[t._v("공급가")]):t._e(),t._v(t._s((s.data.price*s.data.supply_rate*s.data.count/100).toLocaleString())+"원\n              ")]),a("div",{staticClass:"btn"},[a(e.a,{attrs:{"return-value":t.cart[o].data.count,large:"","cancel-text":"취소","save-text":"저장"},on:{"update:returnValue":function(a){return t.$set(t.cart[o].data,"count",a)},"update:return-value":function(a){return t.$set(t.cart[o].data,"count",a)},save:function(a){return t.update(s.id,t.cart[o].data.count)}},scopedSlots:t._u([{key:"input",fn:function(){return[a("div",{staticClass:"mt-4 text-h6"},[t._v("수량변경")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cart[o].data.count,expression:"cart[index].data.count"}],staticClass:"mt10",staticStyle:{"border-bottom":"1px solid #000"},attrs:{type:"number"},domProps:{value:t.cart[o].data.count},on:{input:function(a){a.target.composing||t.$set(t.cart[o].data,"count",a.target.value)}}})]},proxy:!0}],null,!0)},[a("div",[t._v(t._s(t.cart[o].data.count))])])],1),a("div",{staticClass:"status"},[a("button",{on:{click:function(a){return t.del(s.id)}}},[a(i.a,[t._v("mdi-close")])],1)])])])})),0)])]),a("section",{staticClass:"total-wrap mt24"},[a("div",[a("span",{staticClass:"total-prod"},[t._v("총 "+t._s(t.bookCount)+"권")]),a("span",{staticClass:"total"},[t._v("합계 "+t._s(t.totalPrice.toLocaleString())+"원")])]),a("button",{staticClass:"primary",on:{click:t.showModal}},[t._v("주문")])])]):t._e(),t.skeletonLoading||0!==t.cart.length?t._e():a("div",{staticClass:"alert"},[t._v("장바구니가 비었습니다.")])],1)}),[function(){var t=this._self._c;return t("div",[t("div",[this._v("정가")]),t("div",[this._v("공급률")])])}],!1,null,"7504dda2",null).exports}}),p=Object(b.a)(v,(function(){var t=this._self._c;return t("section",[t("h2",{staticClass:"sub-title"},[this._v("장바구니")]),t("section",{staticClass:"sub-container"},[t("CartList")],1)])}),[],!1,null,null,null);a.default=p.exports}}]);